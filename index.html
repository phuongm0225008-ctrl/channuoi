<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C√¥ng C·ª• Dinh D∆∞·ª°ng ChƒÉn Nu√¥i - T√≠nh To√°n ME, CP & Ph·ªëi Tr·ªôn Th·ª©c ƒÇn</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #059669 0%, #0d9488 50%, #0891b2 100%); }
        .card-hover:hover { transform: translateY(-2px); box-shadow: 0 12px 24px rgba(0,0,0,0.15); }
        .ingredient-row:hover { background-color: #f0fdf4; }
        input[type="number"]::-webkit-inner-spin-button { opacity: 1; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="gradient-bg text-white py-8 shadow-lg">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-center gap-4 mb-4">
                <svg class="w-12 h-12" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
                <h1 class="text-3xl md:text-4xl font-bold text-center">C√¥ng C·ª• Dinh D∆∞·ª°ng ChƒÉn Nu√¥i</h1>
            </div>
            <p class="text-center text-green-100 text-lg">T√≠nh to√°n ME, CP v√† ph·ªëi tr·ªôn kh·∫©u ph·∫ßn th·ª©c ƒÉn chuy√™n nghi·ªáp</p>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <!-- Tabs -->
        <div class="flex flex-wrap gap-2 mb-6 justify-center">
            <button onclick="showTab('ingredients')" id="tab-ingredients" class="tab-btn px-6 py-3 rounded-lg font-semibold transition-all bg-emerald-600 text-white">
                üìã B·∫£ng Nguy√™n Li·ªáu
            </button>
            <button onclick="showTab('calculator')" id="tab-calculator" class="tab-btn px-6 py-3 rounded-lg font-semibold transition-all bg-gray-200 text-gray-700 hover:bg-gray-300">
                üßÆ Ph·ªëi Tr·ªôn Kh·∫©u Ph·∫ßn
            </button>
            <button onclick="showTab('requirements')" id="tab-requirements" class="tab-btn px-6 py-3 rounded-lg font-semibold transition-all bg-gray-200 text-gray-700 hover:bg-gray-300">
                üìä Nhu C·∫ßu Dinh D∆∞·ª°ng
            </button>
            <button onclick="showTab('formulas')" id="tab-formulas" class="tab-btn px-6 py-3 rounded-lg font-semibold transition-all bg-gray-200 text-gray-700 hover:bg-gray-300">
                üìê C√¥ng Th·ª©c T√≠nh
            </button>
        </div>

        <!-- Tab 1: B·∫£ng Nguy√™n Li·ªáu -->
        <div id="content-ingredients" class="tab-content">
            <div class="bg-white rounded-xl shadow-lg p-6 card-hover transition-all">
                <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                    <span class="text-3xl">üåæ</span> B·∫£ng Th√†nh Ph·∫ßn Dinh D∆∞·ª°ng Nguy√™n Li·ªáu
                </h2>
                <p class="text-gray-600 mb-4">Gi√° tr·ªã t√≠nh tr√™n 100% v·∫≠t ch·∫•t kh√¥ (DM)</p>
                
                <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead>
                            <tr class="bg-emerald-600 text-white">
                                <th class="px-3 py-3 text-left rounded-tl-lg">Nguy√™n Li·ªáu</th>
                                <th class="px-3 py-3 text-center">ME (kcal/kg)</th>
                                <th class="px-3 py-3 text-center">CP (%)</th>
                                <th class="px-3 py-3 text-center">CF (%)</th>
                                <th class="px-3 py-3 text-center">EE (%)</th>
                                <th class="px-3 py-3 text-center">Ca (%)</th>
                                <th class="px-3 py-3 text-center">P (%)</th>
                                <th class="px-3 py-3 text-center">Lys (%)</th>
                                <th class="px-3 py-3 text-center">Met (%)</th>
                                <th class="px-3 py-3 text-center rounded-tr-lg">Gi√° (ƒë/kg)</th>
                            </tr>
                        </thead>
                        <tbody id="ingredientTable">
                        </tbody>
                    </table>
                </div>

                <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                    <h3 class="font-semibold text-blue-800 mb-2">üìù Ch√∫ th√≠ch:</h3>
                    <div class="grid md:grid-cols-2 gap-2 text-sm text-blue-700">
                        <div><strong>ME:</strong> NƒÉng l∆∞·ª£ng trao ƒë·ªïi (Metabolizable Energy)</div>
                        <div><strong>CP:</strong> Protein th√¥ (Crude Protein)</div>
                        <div><strong>CF:</strong> X∆° th√¥ (Crude Fiber)</div>
                        <div><strong>EE:</strong> B√©o th√¥ (Ether Extract)</div>
                        <div><strong>Ca:</strong> Canxi</div>
                        <div><strong>P:</strong> Ph·ªët pho</div>
                        <div><strong>Lys:</strong> Lysine</div>
                        <div><strong>Met:</strong> Methionine</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 2: Ph·ªëi Tr·ªôn Kh·∫©u Ph·∫ßn -->
        <div id="content-calculator" class="tab-content hidden">
            <div class="grid lg:grid-cols-2 gap-6">
                <!-- Ch·ªçn nguy√™n li·ªáu -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                        <span class="text-3xl">‚öñÔ∏è</span> Ph·ªëi Tr·ªôn Kh·∫©u Ph·∫ßn
                    </h2>

                    <div class="mb-4">
                        <label class="block text-gray-700 font-medium mb-2">Ch·ªçn lo·∫°i v·∫≠t nu√¥i:</label>
                        <select id="animalType" onchange="updateRequirements()" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500">
                            <option value="broiler_starter">G√† th·ªãt - Giai ƒëo·∫°n kh·ªüi ƒë·ªông (0-21 ng√†y)</option>
                            <option value="broiler_grower">G√† th·ªãt - Giai ƒëo·∫°n tƒÉng tr∆∞·ªüng (22-42 ng√†y)</option>
                            <option value="broiler_finisher">G√† th·ªãt - Giai ƒëo·∫°n v·ªó b√©o (>42 ng√†y)</option>
                            <option value="layer">G√† ƒë·∫ª tr·ª©ng</option>
                            <option value="pig_starter">Heo con (5-10kg)</option>
                            <option value="pig_grower">Heo choai (10-30kg)</option>
                            <option value="pig_finisher">Heo th·ªãt (30-100kg)</option>
                        </select>
                    </div>

                    <div class="mb-4 p-3 bg-amber-50 rounded-lg">
                        <p class="text-amber-800 font-medium" id="requirementInfo">
                            Nhu c·∫ßu: ME 3000-3100 kcal/kg | CP 21-23% | Ca 0.9-1.0% | P 0.45%
                        </p>
                    </div>

                    <div class="space-y-3" id="mixingInputs">
                        <!-- Dynamic inputs will be generated here -->
                    </div>

                    <div class="mt-4 flex gap-2">
                        <button onclick="calculateMix()" class="flex-1 bg-emerald-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-emerald-700 transition-all">
                            üßÆ T√≠nh To√°n
                        </button>
                        <button onclick="resetMix()" class="bg-gray-500 text-white py-3 px-4 rounded-lg font-semibold hover:bg-gray-600 transition-all">
                            üîÑ
                        </button>
                    </div>

                    <p id="totalPercent" class="mt-3 text-center font-semibold text-lg text-gray-700">T·ªïng: 0%</p>
                </div>

                <!-- K·∫øt qu·∫£ -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                        <span class="text-3xl">üìä</span> K·∫øt Qu·∫£ Ph·ªëi Tr·ªôn
                    </h2>

                    <div id="results" class="space-y-4">
                        <div class="text-center text-gray-500 py-8">
                            <p class="text-5xl mb-4">üìã</p>
                            <p>Nh·∫≠p t·ª∑ l·ªá nguy√™n li·ªáu v√† nh·∫•n "T√≠nh To√°n"</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 3: Nhu C·∫ßu Dinh D∆∞·ª°ng -->
        <div id="content-requirements" class="tab-content hidden">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                    <span class="text-3xl">üìä</span> B·∫£ng Nhu C·∫ßu Dinh D∆∞·ª°ng Theo Lo·∫°i V·∫≠t Nu√¥i
                </h2>

                <!-- Gia c·∫ßm -->
                <div class="mb-8">
                    <h3 class="text-xl font-bold text-emerald-700 mb-4 flex items-center gap-2">üêî Gia C·∫ßm</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm">
                            <thead>
                                <tr class="bg-emerald-100">
                                    <th class="px-4 py-3 text-left">Giai ƒëo·∫°n</th>
                                    <th class="px-4 py-3 text-center">ME (kcal/kg)</th>
                                    <th class="px-4 py-3 text-center">CP (%)</th>
                                    <th class="px-4 py-3 text-center">CF (%)</th>
                                    <th class="px-4 py-3 text-center">Ca (%)</th>
                                    <th class="px-4 py-3 text-center">P (%)</th>
                                    <th class="px-4 py-3 text-center">Lys (%)</th>
                                    <th class="px-4 py-3 text-center">Met (%)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="px-4 py-3 font-medium">G√† th·ªãt 0-21 ng√†y</td>
                                    <td class="px-4 py-3 text-center">3000-3100</td>
                                    <td class="px-4 py-3 text-center">21-23</td>
                                    <td class="px-4 py-3 text-center">< 5</td>
                                    <td class="px-4 py-3 text-center">0.9-1.0</td>
                                    <td class="px-4 py-3 text-center">0.45</td>
                                    <td class="px-4 py-3 text-center">1.20</td>
                                    <td class="px-4 py-3 text-center">0.50</td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="px-4 py-3 font-medium">G√† th·ªãt 22-42 ng√†y</td>
                                    <td class="px-4 py-3 text-center">3100-3200</td>
                                    <td class="px-4 py-3 text-center">19-21</td>
                                    <td class="px-4 py-3 text-center">< 5</td>
                                    <td class="px-4 py-3 text-center">0.85-0.9</td>
                                    <td class="px-4 py-3 text-center">0.42</td>
                                    <td class="px-4 py-3 text-center">1.05</td>
                                    <td class="px-4 py-3 text-center">0.45</td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="px-4 py-3 font-medium">G√† th·ªãt > 42 ng√†y</td>
                                    <td class="px-4 py-3 text-center">3200-3300</td>
                                    <td class="px-4 py-3 text-center">17-19</td>
                                    <td class="px-4 py-3 text-center">< 6</td>
                                    <td class="px-4 py-3 text-center">0.80-0.85</td>
                                    <td class="px-4 py-3 text-center">0.38</td>
                                    <td class="px-4 py-3 text-center">0.95</td>
                                    <td class="px-4 py-3 text-center">0.40</td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="px-4 py-3 font-medium">G√† ƒë·∫ª tr·ª©ng</td>
                                    <td class="px-4 py-3 text-center">2750-2850</td>
                                    <td class="px-4 py-3 text-center">16-18</td>
                                    <td class="px-4 py-3 text-center">< 7</td>
                                    <td class="px-4 py-3 text-center">3.5-4.0</td>
                                    <td class="px-4 py-3 text-center">0.35</td>
                                    <td class="px-4 py-3 text-center">0.75</td>
                                    <td class="px-4 py-3 text-center">0.35</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Heo -->
                <div>
                    <h3 class="text-xl font-bold text-pink-700 mb-4 flex items-center gap-2">üê∑ Heo</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm">
                            <thead>
                                <tr class="bg-pink-100">
                                    <th class="px-4 py-3 text-left">Giai ƒëo·∫°n</th>
                                    <th class="px-4 py-3 text-center">DE (kcal/kg)</th>
                                    <th class="px-4 py-3 text-center">CP (%)</th>
                                    <th class="px-4 py-3 text-center">CF (%)</th>
                                    <th class="px-4 py-3 text-center">Ca (%)</th>
                                    <th class="px-4 py-3 text-center">P (%)</th>
                                    <th class="px-4 py-3 text-center">Lys (%)</th>
                                    <th class="px-4 py-3 text-center">Met+Cys (%)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="px-4 py-3 font-medium">Heo con (5-10kg)</td>
                                    <td class="px-4 py-3 text-center">3400-3500</td>
                                    <td class="px-4 py-3 text-center">22-24</td>
                                    <td class="px-4 py-3 text-center">< 3</td>
                                    <td class="px-4 py-3 text-center">0.80</td>
                                    <td class="px-4 py-3 text-center">0.65</td>
                                    <td class="px-4 py-3 text-center">1.35</td>
                                    <td class="px-4 py-3 text-center">0.76</td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="px-4 py-3 font-medium">Heo choai (10-30kg)</td>
                                    <td class="px-4 py-3 text-center">3300-3400</td>
                                    <td class="px-4 py-3 text-center">18-20</td>
                                    <td class="px-4 py-3 text-center">< 5</td>
                                    <td class="px-4 py-3 text-center">0.70</td>
                                    <td class="px-4 py-3 text-center">0.55</td>
                                    <td class="px-4 py-3 text-center">1.10</td>
                                    <td class="px-4 py-3 text-center">0.62</td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="px-4 py-3 font-medium">Heo th·ªãt (30-60kg)</td>
                                    <td class="px-4 py-3 text-center">3200-3300</td>
                                    <td class="px-4 py-3 text-center">16-18</td>
                                    <td class="px-4 py-3 text-center">< 6</td>
                                    <td class="px-4 py-3 text-center">0.60</td>
                                    <td class="px-4 py-3 text-center">0.50</td>
                                    <td class="px-4 py-3 text-center">0.90</td>
                                    <td class="px-4 py-3 text-center">0.54</td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="px-4 py-3 font-medium">Heo th·ªãt (60-100kg)</td>
                                    <td class="px-4 py-3 text-center">3100-3200</td>
                                    <td class="px-4 py-3 text-center">14-16</td>
                                    <td class="px-4 py-3 text-center">< 7</td>
                                    <td class="px-4 py-3 text-center">0.55</td>
                                    <td class="px-4 py-3 text-center">0.45</td>
                                    <td class="px-4 py-3 text-center">0.75</td>
                                    <td class="px-4 py-3 text-center">0.46</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 4: C√¥ng Th·ª©c T√≠nh -->
        <div id="content-formulas" class="tab-content hidden">
            <div class="grid md:grid-cols-2 gap-6">
                <!-- C√¥ng th·ª©c ME -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold text-emerald-700 mb-4 flex items-center gap-2">
                        ‚ö° C√¥ng Th·ª©c T√≠nh ME (NƒÉng L∆∞·ª£ng Trao ƒê·ªïi)
                    </h3>
                    
                    <div class="space-y-4">
                        <div class="p-4 bg-gray-100 rounded-lg">
                            <p class="font-semibold text-gray-800 mb-2">C√¥ng th·ª©c Carpenter & Clegg (cho gia c·∫ßm):</p>
                            <p class="text-emerald-700 font-mono bg-white p-3 rounded">
                                ME = 37.98√óCP + 84.75√óEE + 28.75√óNFE + 16.11√óCF
                            </p>
                        </div>

                        <div class="p-4 bg-gray-100 rounded-lg">
                            <p class="font-semibold text-gray-800 mb-2">C√¥ng th·ª©c NRC (cho heo):</p>
                            <p class="text-emerald-700 font-mono bg-white p-3 rounded">
                                DE = 4151 - 122√óCF + 23√óCP + 38√óEE - 64√óAsh
                            </p>
                            <p class="text-emerald-700 font-mono bg-white p-3 rounded mt-2">
                                ME = DE √ó 0.96 (ho·∫∑c DE - 0.68√óCP)
                            </p>
                        </div>

                        <div class="p-4 bg-blue-50 rounded-lg">
                            <p class="text-sm text-blue-700">
                                <strong>Trong ƒë√≥:</strong><br>
                                NFE (Nitrogen Free Extract) = 100 - (Protein + X∆° + B√©o + Tro + ·∫®m)
                            </p>
                        </div>
                    </div>
                </div>

                <!-- C√¥ng th·ª©c CP -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold text-blue-700 mb-4 flex items-center gap-2">
                        üß¨ C√¥ng Th·ª©c T√≠nh CP (Protein Th√¥)
                    </h3>
                    
                    <div class="space-y-4">
                        <div class="p-4 bg-gray-100 rounded-lg">
                            <p class="font-semibold text-gray-800 mb-2">Ph∆∞∆°ng ph√°p Kjeldahl:</p>
                            <p class="text-blue-700 font-mono bg-white p-3 rounded">
                                CP (%) = N (%) √ó 6.25
                            </p>
                        </div>

                        <div class="p-4 bg-gray-100 rounded-lg">
                            <p class="font-semibold text-gray-800 mb-2">CP c·ªßa h·ªón h·ª£p:</p>
                            <p class="text-blue-700 font-mono bg-white p-3 rounded">
                                CP<sub>mix</sub> = Œ£ (CP<sub>i</sub> √ó %<sub>i</sub>) / 100
                            </p>
                        </div>

                        <div class="p-4 bg-amber-50 rounded-lg">
                            <p class="text-sm text-amber-700">
                                <strong>L∆∞u √Ω:</strong> H·ªá s·ªë 6.25 l√† h·ªá s·ªë chuy·ªÉn ƒë·ªïi trung b√¨nh. M·ªôt s·ªë nguy√™n li·ªáu c√≥ h·ªá s·ªë ri√™ng (s·ªØa: 6.38, l√∫a m√¨: 5.70).
                            </p>
                        </div>
                    </div>
                </div>

                <!-- C√¥ng th·ª©c t·ª∑ l·ªá Ca:P -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold text-orange-700 mb-4 flex items-center gap-2">
                        ü¶¥ T·ª∑ L·ªá Ca:P T·ªëi ∆Øu
                    </h3>
                    
                    <div class="space-y-4">
                        <div class="p-4 bg-gray-100 rounded-lg">
                            <p class="font-semibold text-gray-800 mb-2">T·ª∑ l·ªá khuy·∫øn ngh·ªã:</p>
                            <ul class="space-y-2 text-gray-700">
                                <li>‚Ä¢ <strong>Gia c·∫ßm:</strong> Ca:P = 2:1 ƒë·∫øn 2.5:1</li>
                                <li>‚Ä¢ <strong>Heo:</strong> Ca:P = 1.2:1 ƒë·∫øn 1.5:1</li>
                                <li>‚Ä¢ <strong>G√† ƒë·∫ª:</strong> Ca:P = 10:1 ƒë·∫øn 12:1</li>
                            </ul>
                        </div>

                        <div class="p-4 bg-red-50 rounded-lg">
                            <p class="text-sm text-red-700">
                                <strong>C·∫£nh b√°o:</strong> M·∫•t c√¢n b·∫±ng Ca:P c√≥ th·ªÉ g√¢y c√≤i x∆∞∆°ng, li·ªát ch√¢n, gi·∫£m nƒÉng su·∫•t.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- T√≠nh gi√° th√†nh -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold text-purple-700 mb-4 flex items-center gap-2">
                        üí∞ T√≠nh Gi√° Th√†nh Th·ª©c ƒÇn
                    </h3>
                    
                    <div class="space-y-4">
                        <div class="p-4 bg-gray-100 rounded-lg">
                            <p class="font-semibold text-gray-800 mb-2">Gi√° 1kg th·ª©c ƒÉn h·ªón h·ª£p:</p>
                            <p class="text-purple-700 font-mono bg-white p-3 rounded">
                                Gi√° = Œ£ (Gi√°<sub>i</sub> √ó %<sub>i</sub>) / 100
                            </p>
                        </div>

                        <div class="p-4 bg-gray-100 rounded-lg">
                            <p class="font-semibold text-gray-800 mb-2">Chi ph√≠/ƒë∆°n v·ªã nƒÉng l∆∞·ª£ng:</p>
                            <p class="text-purple-700 font-mono bg-white p-3 rounded">
                                ƒê/kcal ME = Gi√° (ƒë/kg) / ME (kcal/kg)
                            </p>
                        </div>

                        <div class="p-4 bg-green-50 rounded-lg">
                            <p class="text-sm text-green-700">
                                <strong>M·∫πo:</strong> So s√°nh chi ph√≠/kcal ME gi√∫p ƒë√°nh gi√° hi·ªáu qu·∫£ kinh t·∫ø c·ªßa c√¥ng th·ª©c.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-6 mt-8">
        <div class="container mx-auto px-4 text-center">
            <p class="text-gray-400">¬© 2024 C√¥ng C·ª• Dinh D∆∞·ª°ng ChƒÉn Nu√¥i | D·ªØ li·ªáu tham kh·∫£o t·ª´ NRC, INRA</p>
            <p class="text-gray-500 text-sm mt-2">L∆∞u √Ω: C√°c gi√° tr·ªã dinh d∆∞·ª°ng c√≥ th·ªÉ thay ƒë·ªïi t√πy theo ngu·ªìn g·ªëc v√† ch·∫•t l∆∞·ª£ng nguy√™n li·ªáu</p>
        </div>
    </footer>

    <script>
        // D·ªØ li·ªáu nguy√™n li·ªáu th·ª©c ƒÉn chƒÉn nu√¥i
        const ingredients = [
            { id: 'corn', name: 'Ng√¥ h·∫°t', ME: 3350, CP: 8.5, CF: 2.2, EE: 3.8, Ca: 0.02, P: 0.28, Lys: 0.26, Met: 0.18, price: 8500, category: 'energy' },
            { id: 'rice_bran', name: 'C√°m g·∫°o', ME: 2980, CP: 13.0, CF: 8.5, EE: 14.0, Ca: 0.07, P: 1.50, Lys: 0.55, Met: 0.25, price: 7500, category: 'energy' },
            { id: 'broken_rice', name: 'T·∫•m', ME: 3400, CP: 8.0, CF: 0.8, EE: 1.5, Ca: 0.02, P: 0.16, Lys: 0.30, Met: 0.15, price: 9000, category: 'energy' },
            { id: 'cassava', name: 'B·ªôt s·∫Øn', ME: 3200, CP: 2.5, CF: 3.5, EE: 0.5, Ca: 0.12, P: 0.10, Lys: 0.08, Met: 0.03, price: 6500, category: 'energy' },
            { id: 'wheat', name: 'L√∫a m√¨', ME: 3150, CP: 12.5, CF: 2.8, EE: 1.8, Ca: 0.04, P: 0.35, Lys: 0.36, Met: 0.20, price: 9500, category: 'energy' },
            { id: 'sbm', name: 'Kh√¥ ƒë·∫≠u n√†nh 44%', ME: 2440, CP: 44.0, CF: 6.5, EE: 1.5, Ca: 0.30, P: 0.65, Lys: 2.80, Met: 0.65, price: 14500, category: 'protein' },
            { id: 'sbm48', name: 'Kh√¥ ƒë·∫≠u n√†nh 48%', ME: 2550, CP: 48.0, CF: 3.5, EE: 1.0, Ca: 0.32, P: 0.68, Lys: 3.02, Met: 0.70, price: 15500, category: 'protein' },
            { id: 'fish_meal_60', name: 'B·ªôt c√° 60%', ME: 2850, CP: 60.0, CF: 1.0, EE: 9.0, Ca: 5.50, P: 2.80, Lys: 4.80, Met: 1.80, price: 28000, category: 'protein' },
            { id: 'fish_meal_65', name: 'B·ªôt c√° 65%', ME: 2950, CP: 65.0, CF: 0.8, EE: 8.0, Ca: 4.80, P: 2.50, Lys: 5.20, Met: 1.95, price: 32000, category: 'protein' },
            { id: 'meat_bone', name: 'B·ªôt th·ªãt x∆∞∆°ng', ME: 2200, CP: 50.0, CF: 2.5, EE: 10.0, Ca: 10.0, P: 5.00, Lys: 2.60, Met: 0.70, price: 18000, category: 'protein' },
            { id: 'peanut_meal', name: 'Kh√¥ d·∫ßu l·∫°c', ME: 2400, CP: 45.0, CF: 12.0, EE: 1.5, Ca: 0.18, P: 0.60, Lys: 1.65, Met: 0.45, price: 12000, category: 'protein' },
            { id: 'copra_meal', name: 'Kh√¥ d·∫ßu d·ª´a', ME: 2100, CP: 21.0, CF: 13.0, EE: 2.0, Ca: 0.08, P: 0.55, Lys: 0.63, Met: 0.30, price: 8000, category: 'protein' },
            { id: 'limestone', name: 'Bite ƒë√° v√¥i', ME: 0, CP: 0, CF: 0, EE: 0, Ca: 38.0, P: 0.02, Lys: 0, Met: 0, price: 2000, category: 'mineral' },
            { id: 'dcp', name: 'DCP (Dicalcium Phosphate)', ME: 0, CP: 0, CF: 0, EE: 0, Ca: 22.0, P: 18.0, Lys: 0, Met: 0, price: 15000, category: 'mineral' },
            { id: 'mcp', name: 'MCP (Monocalcium Phosphate)', ME: 0, CP: 0, CF: 0, EE: 0, Ca: 16.0, P: 21.0, Lys: 0, Met: 0, price: 18000, category: 'mineral' },
            { id: 'salt', name: 'Mu·ªëi (NaCl)', ME: 0, CP: 0, CF: 0, EE: 0, Ca: 0, P: 0, Lys: 0, Met: 0, price: 3500, category: 'mineral' },
            { id: 'lysine', name: 'L-Lysine HCl 98%', ME: 0, CP: 0, CF: 0, EE: 0, Ca: 0, P: 0, Lys: 78.0, Met: 0, price: 45000, category: 'amino' },
            { id: 'methionine', name: 'DL-Methionine 99%', ME: 0, CP: 0, CF: 0, EE: 0, Ca: 0, P: 0, Lys: 0, Met: 99.0, price: 85000, category: 'amino' },
            { id: 'threonine', name: 'L-Threonine 98%', ME: 0, CP: 0, CF: 0, EE: 0, Ca: 0, P: 0, Lys: 0, Met: 0, price: 50000, category: 'amino' },
            { id: 'oil', name: 'D·∫ßu th·ª±c v·∫≠t', ME: 8800, CP: 0, CF: 0, EE: 99.0, Ca: 0, P: 0, Lys: 0, Met: 0, price: 25000, category: 'energy' },
            { id: 'premix', name: 'Premix vitamin-kho√°ng', ME: 0, CP: 0, CF: 0, EE: 0, Ca: 0, P: 0, Lys: 0, Met: 0, price: 65000, category: 'premix' }
        ];

        // Nhu c·∫ßu dinh d∆∞·ª°ng theo lo·∫°i v·∫≠t nu√¥i
        const requirements = {
            broiler_starter: { ME: { min: 3000, max: 3100 }, CP: { min: 21, max: 23 }, CF: { max: 5 }, Ca: { min: 0.9, max: 1.0 }, P: { min: 0.45, max: 0.50 }, Lys: 1.20, Met: 0.50 },
            broiler_grower: { ME: { min: 3100, max: 3200 }, CP: { min: 19, max: 21 }, CF: { max: 5 }, Ca: { min: 0.85, max: 0.90 }, P: { min: 0.42, max: 0.45 }, Lys: 1.05, Met: 0.45 },
            broiler_finisher: { ME: { min: 3200, max: 3300 }, CP: { min: 17, max: 19 }, CF: { max: 6 }, Ca: { min: 0.80, max: 0.85 }, P: { min: 0.38, max: 0.42 }, Lys: 0.95, Met: 0.40 },
            layer: { ME: { min: 2750, max: 2850 }, CP: { min: 16, max: 18 }, CF: { max: 7 }, Ca: { min: 3.5, max: 4.0 }, P: { min: 0.35, max: 0.40 }, Lys: 0.75, Met: 0.35 },
            pig_starter: { ME: { min: 3400, max: 3500 }, CP: { min: 22, max: 24 }, CF: { max: 3 }, Ca: { min: 0.75, max: 0.85 }, P: { min: 0.60, max: 0.70 }, Lys: 1.35, Met: 0.38 },
            pig_grower: { ME: { min: 3300, max: 3400 }, CP: { min: 18, max: 20 }, CF: { max: 5 }, Ca: { min: 0.65, max: 0.75 }, P: { min: 0.50, max: 0.60 }, Lys: 1.10, Met: 0.31 },
            pig_finisher: { ME: { min: 3100, max: 3200 }, CP: { min: 14, max: 16 }, CF: { max: 7 }, Ca: { min: 0.50, max: 0.60 }, P: { min: 0.40, max: 0.50 }, Lys: 0.75, Met: 0.23 }
        };

        // Hi·ªÉn th·ªã b·∫£ng nguy√™n li·ªáu
        function renderIngredientTable() {
            const tbody = document.getElementById('ingredientTable');
            const categories = {
                'energy': { name: 'Nguy√™n li·ªáu nƒÉng l∆∞·ª£ng', color: 'bg-yellow-50' },
                'protein': { name: 'Nguy√™n li·ªáu protein', color: 'bg-green-50' },
                'mineral': { name: 'Kho√°ng ch·∫•t', color: 'bg-blue-50' },
                'amino': { name: 'Axit amin', color: 'bg-purple-50' },
                'premix': { name: 'Premix', color: 'bg-orange-50' }
            };

            let currentCategory = '';
            let html = '';

            ingredients.forEach(ing => {
                if (ing.category !== currentCategory) {
                    currentCategory = ing.category;
                    html += `<tr class="${categories[currentCategory].color}">
                        <td colspan="10" class="px-3 py-2 font-bold text-gray-700">${categories[currentCategory].name}</td>
                    </tr>`;
                }
                html += `
                    <tr class="border-b ingredient-row transition-colors">
                        <td class="px-3 py-2 font-medium">${ing.name}</td>
                        <td class="px-3 py-2 text-center">${ing.ME || '-'}</td>
                        <td class="px-3 py-2 text-center">${ing.CP || '-'}</td>
                        <td class="px-3 py-2 text-center">${ing.CF || '-'}</td>
                        <td class="px-3 py-2 text-center">${ing.EE || '-'}</td>
                        <td class="px-3 py-2 text-center">${ing.Ca || '-'}</td>
                        <td class="px-3 py-2 text-center">${ing.P || '-'}</td>
                        <td class="px-3 py-2 text-center">${ing.Lys || '-'}</td>
                        <td class="px-3 py-2 text-center">${ing.Met || '-'}</td>
                        <td class="px-3 py-2 text-center text-emerald-600 font-medium">${ing.price.toLocaleString()}</td>
                    </tr>
                `;
            });

            tbody.innerHTML = html;
        }

        // T·∫°o input ph·ªëi tr·ªôn
        function renderMixingInputs() {
            const container = document.getElementById('mixingInputs');
            let html = '<div class="grid gap-2 max-h-96 overflow-y-auto pr-2">';

            ingredients.forEach(ing => {
                html += `
                    <div class="flex items-center gap-2 p-2 bg-gray-50 rounded-lg">
                        <label class="flex-1 text-sm font-medium text-gray-700">${ing.name}</label>
                        <input type="number" id="mix_${ing.id}" 
                            class="w-20 p-2 border border-gray-300 rounded text-center text-sm focus:ring-2 focus:ring-emerald-500" 
                            min="0" max="100" step="0.1" value="0" onchange="updateTotal()">
                        <span class="text-gray-500 text-sm">%</span>
                    </div>
                `;
            });

            html += '</div>';
            container.innerHTML = html;
        }

        // C·∫≠p nh·∫≠t t·ªïng %
        function updateTotal() {
            let total = 0;
            ingredients.forEach(ing => {
                const val = parseFloat(document.getElementById(`mix_${ing.id}`).value) || 0;
                total += val;
            });

            const totalEl = document.getElementById('totalPercent');
            totalEl.textContent = `T·ªïng: ${total.toFixed(1)}%`;

            if (Math.abs(total - 100) < 0.1) {
                totalEl.className = 'mt-3 text-center font-semibold text-lg text-green-600';
            } else if (total > 100) {
                totalEl.className = 'mt-3 text-center font-semibold text-lg text-red-600';
            } else {
                totalEl.className = 'mt-3 text-center font-semibold text-lg text-amber-600';
            }
        }

        // T√≠nh to√°n ph·ªëi tr·ªôn
        function calculateMix() {
            let total = 0;
            let results = { ME: 0, CP: 0, CF: 0, EE: 0, Ca: 0, P: 0, Lys: 0, Met: 0, price: 0 };

            ingredients.forEach(ing => {
                const percent = parseFloat(document.getElementById(`mix_${ing.id}`).value) || 0;
                total += percent;

                results.ME += (ing.ME * percent) / 100;
                results.CP += (ing.CP * percent) / 100;
                results.CF += (ing.CF * percent) / 100;
                results.EE += (ing.EE * percent) / 100;
                results.Ca += (ing.Ca * percent) / 100;
                results.P += (ing.P * percent) / 100;
                results.Lys += (ing.Lys * percent) / 100;
                results.Met += (ing.Met * percent) / 100;
                results.price += (ing.price * percent) / 100;
            });

            if (total < 99.9 || total > 100.1) {
                alert(`T·ªïng t·ª∑ l·ªá ph·∫£i b·∫±ng 100%! Hi·ªán t·∫°i: ${total.toFixed(1)}%`);
                return;
            }

            const animalType = document.getElementById('animalType').value;
            const req = requirements[animalType];

            // Hi·ªÉn th·ªã k·∫øt qu·∫£
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <div class="grid grid-cols-2 gap-3">
                    ${createResultCard('ME', results.ME.toFixed(0), 'kcal/kg', req.ME, '‚ö°')}
                    ${createResultCard('CP', results.CP.toFixed(2), '%', req.CP, 'üß¨')}
                    ${createResultCard('CF', results.CF.toFixed(2), '%', { max: req.CF.max }, 'üåæ')}
                    ${createResultCard('EE', results.EE.toFixed(2), '%', null, 'üõ¢Ô∏è')}
                    ${createResultCard('Ca', results.Ca.toFixed(2), '%', req.Ca, 'ü¶¥')}
                    ${createResultCard('P', results.P.toFixed(2), '%', req.P, 'üî¨')}
                    ${createResultCard('Lysine', results.Lys.toFixed(3), '%', { min: req.Lys }, 'üî∑')}
                    ${createResultCard('Methionine', results.Met.toFixed(3), '%', { min: req.Met }, 'üî∂')}
                </div>

                <div class="mt-4 p-4 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-xl text-white">
                    <div class="flex justify-between items-center">
                        <span class="text-lg font-semibold">üí∞ Gi√° th√†nh 1kg th·ª©c ƒÉn:</span>
                        <span class="text-2xl font-bold">${results.price.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ',')} ƒë</span>
                    </div>
                    <div class="flex justify-between items-center mt-2 text-emerald-100">
                        <span>Chi ph√≠/1000 kcal ME:</span>
                        <span class="font-medium">${(results.price / results.ME * 1000).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ',')} ƒë</span>
                    </div>
                    <div class="flex justify-between items-center mt-1 text-emerald-100">
                        <span>T·ª∑ l·ªá Ca:P:</span>
                        <span class="font-medium">${(results.Ca / results.P).toFixed(2)} : 1</span>
                    </div>
                </div>
            `;
        }

        // T·∫°o card k·∫øt qu·∫£
        function createResultCard(name, value, unit, requirement, icon) {
            let status = 'bg-gray-100';
            let statusText = '';

            if (requirement) {
                const numValue = parseFloat(value);
                if (requirement.min !== undefined && requirement.max !== undefined) {
                    if (numValue >= requirement.min && numValue <= requirement.max) {
                        status = 'bg-green-100 border-green-300';
                        statusText = '‚úì';
                    } else if (numValue < requirement.min) {
                        status = 'bg-red-100 border-red-300';
                        statusText = '‚Üì Th·∫•p';
                    } else {
                        status = 'bg-amber-100 border-amber-300';
                        statusText = '‚Üë Cao';
                    }
                } else if (requirement.min !== undefined) {
                    if (numValue >= requirement.min) {
                        status = 'bg-green-100 border-green-300';
                        statusText = '‚úì';
                    } else {
                        status = 'bg-red-100 border-red-300';
                        statusText = '‚Üì Th·∫•p';
                    }
                } else if (requirement.max !== undefined) {
                    if (numValue <= requirement.max) {
                        status = 'bg-green-100 border-green-300';
                        statusText = '‚úì';
                    } else {
                        status = 'bg-red-100 border-red-300';
                        statusText = '‚Üë Cao';
                    }
                }
            }

            return `
                <div class="p-3 ${status} rounded-lg border">
                    <div class="flex items-center justify-between">
                        <span class="text-2xl">${icon}</span>
                        <span class="text-xs font-medium ${statusText === '‚úì' ? 'text-green-600' : statusText.includes('Th·∫•p') ? 'text-red-600' : statusText.includes('Cao') ? 'text-amber-600' : ''}">${statusText}</span>
                    </div>
                    <p class="text-gray-600 text-sm mt-1">${name}</p>
                    <p class="text-xl font-bold text-gray-800">${value} <span class="text-sm font-normal">${unit}</span></p>
                </div>
            `;
        }

        // Reset ph·ªëi tr·ªôn
        function resetMix() {
            ingredients.forEach(ing => {
                document.getElementById(`mix_${ing.id}`).value = 0;
            });
            updateTotal();
            document.getElementById('results').innerHTML = `
                <div class="text-center text-gray-500 py-8">
                    <p class="text-5xl mb-4">üìã</p>
                    <p>Nh·∫≠p t·ª∑ l·ªá nguy√™n li·ªáu v√† nh·∫•n "T√≠nh To√°n"</p>
                </div>
            `;
        }

        // C·∫≠p nh·∫≠t th√¥ng tin nhu c·∫ßu
        function updateRequirements() {
            const type = document.getElementById('animalType').value;
            const req = requirements[type];
            const info = document.getElementById('requirementInfo');
            info.textContent = `Nhu c·∫ßu: ME ${req.ME.min}-${req.ME.max} kcal/kg | CP ${req.CP.min}-${req.CP.max}% | Ca ${req.Ca.min}-${req.Ca.max}% | P ${req.P.min}-${req.P.max}%`;
        }

        // Chuy·ªÉn tab
        function showTab(tabName) {
            // ·∫®n t·∫•t c·∫£ content
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
            // Hi·ªán tab ƒë∆∞·ª£c ch·ªçn
            document.getElementById(`content-${tabName}`).classList.remove('hidden');

            // C·∫≠p nh·∫≠t style c√°c n√∫t
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.className = 'tab-btn px-6 py-3 rounded-lg font-semibold transition-all bg-gray-200 text-gray-700 hover:bg-gray-300';
            });
            document.getElementById(`tab-${tabName}`).className = 'tab-btn px-6 py-3 rounded-lg font-semibold transition-all bg-emerald-600 text-white';
        }

        // Kh·ªüi t·∫°o
        document.addEventListener('DOMContentLoaded', () => {
            renderIngredientTable();
            renderMixingInputs();
            updateRequirements();
        });
    </script>
</body>
</html>